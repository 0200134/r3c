name: R3C Auto Rebuild After Issue Close (v6)

on:
  issues:
    types: [closed]

permissions:
  contents: write
  actions: write
  issues: write

jobs:
  rebuild:
    if: contains(github.event.issue.title, 'R3C Build Failed')
    runs-on: ubuntu-latest

    steps:
      - name: Comment that issue was resolved
        uses: peter-evans/create-or-update-comment@v3
        with:
          issue-number: ${{ github.event.issue.number }}
          body: |
            âœ… **ì´ìŠˆê°€ ë‹«í˜”ìŠµë‹ˆë‹¤.**
            - R3CëŠ” ìë™ìœ¼ë¡œ ì¬ë¹Œë“œë¥¼ ì‹œì‘í•©ë‹ˆë‹¤.
            - ë¹Œë“œ ê²°ê³¼ëŠ” ë‹¤ìŒ ì‹¤í–‰ì—ì„œ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤.
            ğŸ” **Auto-Rebuild Triggered**

      - name: Trigger new build
        uses: benc-uk/workflow-dispatch@v1
        with:
          workflow: "R3C Autonomous Build Line (v5)"
          ref: "main"
