name: ðŸŒ¿ Auto Branch Creator

on:
  issue_comment:
    types: [created]

permissions:
  contents: write
  issues: read

jobs:
  create-branch:
    # /branch ë¡œ ì‹œìž‘í•˜ëŠ” ëŒ“ê¸€ë§Œ ìž‘ë™
    if: startsWith(github.event.comment.body, '/branch ')
    runs-on: ubuntu-latest

    steps:
      - name: ðŸ§° Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: ðŸ” Parse branch name
        id: parse
        run: |
          RAW="${{ github.event.comment.body }}"
          BRANCH=$(echo "$RAW" | sed 's/^\/branch[[:space:]]*//')
          echo "branch=$BRANCH" >> $GITHUB_ENV

      - name: ðŸŒ¿ Create new branch
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "41898282+github-actions[bot]@users.noreply.github.com"
          git checkout -b "${{ env.branch }}"
          git push origin "${{ env.branch }}"

      - name: ðŸ’¬ Notify success
        uses: peter-evans/create-or-update-comment@v4
        with:
          issue-number: ${{ github.event.issue.number }}
          body: |
            âœ… Branch **${{ env.branch }}** created successfully!  
            You can now push commits to `origin/${{ env.branch }}`.
