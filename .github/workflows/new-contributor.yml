name: 🤝 Welcome New Contributor (v1.1 Fixed)

on:
  pull_request:
    types: [opened, reopened, synchronize]

permissions:
  pull-requests: write

jobs:
  welcome:
    runs-on: ubuntu-latest
    steps:
      - name: 🧩 Checkout repository
        uses: actions/checkout@v4

      - name: 🤖 Post welcome comment
        uses: peter-evans/create-or-update-comment@v3
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          issue-number: ${{ github.event.pull_request.number }}
          body: |
            👋 **Welcome to the R3C Project!**

            Thanks for opening your first Pull Request, @${{ github.actor }} 🎉  
            R3C is an **autonomous build & self-healing compiler system** — and every contribution helps it evolve.

            **Next Steps**
            - ✅ Ensure your PR passes the [CI build](https://github.com/${{ github.repository }}/actions)
            - 🧠 Read the [Contributor Guide](https://github.com/${{ github.repository }}/blob/main/CONTRIBUTING.md)
            - 🧾 Check the [Growth Roadmap v6](https://github.com/${{ github.repository }}/blob/main/docs/roadmap_v6.md)
            - 🪲 Learn the philosophy: [`docs/philosophy.md`](https://github.com/${{ github.repository }}/blob/main/docs/philosophy.md)

            Once merged, you’ll appear in **Top Contributors 🏅** automatically.  
            Thanks for joining the R3C ecosystem 🚀

  os-check:
    name: 🧠 Runner OS Check
    runs-on: ubuntu-latest
    steps:
      - name: 🔍 Detect current OS
        shell: bash
        run: |
          echo "Current runner OS: $RUNNER_OS"
          if [ "$RUNNER_OS" = "Linux" ]; then
            echo "✅ Linux environment detected"
          elif [ "$RUNNER_OS" = "Windows" ]; then
            echo "✅ Windows environment detected"
          elif [ "$RUNNER_OS" = "macOS" ]; then
            echo "✅ macOS environment detected"
          else
            echo "⚠️ Unknown environment"
          fi
